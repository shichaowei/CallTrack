<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>User Interaction</title>
      <link rel="stylesheet" href="ystyle.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
      <link rel="home" href="index.html" title="yFiles for Java Developer's Guide">
      <link rel="up" href="view_hierarchy.html" title="Chapter&nbsp;7.&nbsp;Graph Hierarchies">
      <link rel="previous" href="hier_mvc_view.html" title="View Implementations">
      <link rel="next" href="hier_events_and_listeners.html" title="Events and Listeners">
      <link rel="stylesheet" href="jsdt/toc.css" type="text/css"><script type="text/javascript" src="jsdt/jquery.min.js"></script><script type="text/javascript" src="jsdt/toc.js"></script><link type="text/css" rel="stylesheet" href="jssh/SyntaxHighlighter.css"><script type="text/javascript" src="jssh/shCore.js"></script><script type="text/javascript" src="jssh/shBrushJava.js"></script><script type="text/javascript" src="jssh/shBrushXml.js"></script><script type="text/javascript">
  function sh() {

    dp.SyntaxHighlighter.HighlightAll('programlisting', false, false, false, null, false);
  }
  </script></head>
   <body onload="sh()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">User Interaction</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="hier_mvc_view.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;7.&nbsp;Graph Hierarchies</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="hier_events_and_listeners.html">Next</a></td>
            </tr>
         </table>
         <div class="navline"></div>
         <div style="display:none"><img src="figures/navbg.jpg" alt=""><img src="figures/navline.jpg" alt=""></div>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="hier_mvc_controller"></a>User Interaction
                  </h2>
               </div>
            </div>
            <div></div>
         </div><a class="indexterm" name="d0e32916"></a><p>
            Group nodes and folder nodes introduce new user interaction aspects with grouped
            graphs. 
            These aspects are reflected by view mode and Action implementations in package y.view.
            
         </p>
         <p>
            The view modes listed in <a href="hier_mvc_controller.html#hier_all_modes" title="Table&nbsp;7.3.&nbsp;View modes associated with class EditMode with group node-specific behavior">Table&nbsp;7.3, &#8220;View modes associated with class EditMode with group node-specific behavior&#8221;</a> provide specific group 
            node-related functionality.
            
         </p>
         <div class="table"><a name="hier_all_modes"></a><p class="title"><b>Table&nbsp;7.3.&nbsp;View modes associated with class EditMode with group node-specific behavior</b></p>
            <table summary="View modes associated with class EditMode with group node-specific behavior" width="100%" border="1">
               <colgroup>
                  <col width="25%" align="left">
                  <col width="75%" align="left">
               </colgroup>
               <thead valign="top">
                  <tr>
                     <th align="left">Classname</th>
                     <th align="left">Description</th>
                  </tr>
               </thead>
               <tbody valign="top">
                  <tr>
                     <td align="left"><a href="../api/y/view/CreateEdgeMode.html" title="Link to API documentation" target="_top">CreateEdgeMode<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          Edge creation involving group nodes or their grouped nodes is taken special care 
                          of. 
                          The group node's border area is reserved for creation of edges connecting to the 
                          group node itself. 
                          This also implies that bend creation is not possible at a group node's border.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/HotSpotMode.html" title="Link to API documentation" target="_top">HotSpotMode<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          Auto bounds-constrained group node resizing policies are taken special care of.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/MoveSelectionMode.html" title="Link to API documentation" target="_top">MoveSelectionMode<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          Whenever a group node is moved, all its grouped nodes are moved, too. 
                          This mode does also provide support to add further nodes to a group node.
                        
                          Furthermore, during re-parenting gestures, possible target group nodes can optionally
                          be highlighted using a customizable adornment.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/SelectionBoxMode.html" title="Link to API documentation" target="_top">SelectionBoxMode<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          A group node's selection state is only changed when it is entirely contained in 
                          the selection box.
                          
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p>
            In addition, class <a href="../api/y/view/Graph2DViewActions.html" title="Link to API documentation" target="_top">Graph2DViewActions<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> provides 
            many predefined Action implementations to handle group nodes and folder nodes.
            
         </p>
         <div class="table"><a name="hier_actions"></a><p class="title"><b>Table&nbsp;7.4.&nbsp;Predefined group node/folder node-related Action implementations from class Graph2DViewActions</b></p>
            <table summary="Predefined group node/folder node-related Action implementations from class Graph2DViewActions" width="100%" border="1">
               <colgroup>
                  <col width="25%" align="left">
                  <col width="75%" align="left">
               </colgroup>
               <thead valign="top">
                  <tr>
                     <th align="left">Classname</th>
                     <th align="left">Description</th>
                  </tr>
               </thead>
               <tbody valign="top">
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.CloseGroupsAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.CloseGroupsAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          Closes selected group nodes. 
                          Each group node is converted into a folder node, the contained nodes are removed 
                          from the graph that contains the group node and added to the folder node's inner 
                          graph instead.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.OpenFoldersAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.OpenFoldersAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          Opens selected folder nodes. 
                          Each folder node is converted into a group node, all nodes from the folder node's 
                          inner graph are removed from it and added to the graph that contains the folder 
                          node instead.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.GroupSelectionAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.GroupSelectionAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">A selected subgraph is put into a newly created group node.</td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.FoldSelectionAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.FoldSelectionAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          A selected subgraph is removed from the containing graph and added to the new 
                          inner graph of a newly created folder node instead.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.UngroupSelectionAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.UngroupSelectionAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">A selected subgraph is taken out of its directly containing group node.</td>
                  </tr>
                  <tr>
                     <td align="left"><a href="../api/y/view/Graph2DViewActions.UnfoldSelectionAction.html" title="Link to API documentation" target="_top">Graph2DViewActions.UnfoldSelectionAction<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                     <td align="left">
                          A selected subgraph is removed from the inner graph of a folder node and added 
                          to the graph containing the folder node instead.
                          
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p>
            Graph2DViewActions also facilitates creation of new Action implementations.
            
         </p>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="d0e33009"></a>Tutorial Demo Code
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               The class fragment that is presented in <a href="hier_mvc_controller.html#ex_gnr_state" title="Example&nbsp;7.5.&nbsp;Toggling a GroupNodeRealizer's state">Example&nbsp;7.5, &#8220;Toggling a GroupNodeRealizer's state&#8221;</a> briefly shows 
               how a view mode could use the group node/folder node-related Action implementations 
               to change the state of a GroupNodeRealizer-rendered node in response to a mouse 
               click on the node's state icon.
               
            </p>
            <div class="example"><a name="ex_gnr_state"></a><p class="title"><b>Example&nbsp;7.5.&nbsp;Toggling a GroupNodeRealizer's state</b></p><pre class="programlisting java">
public class ToggleOpenClosedStateViewMode extends ViewMode {
  HierarchyManager hm;
  
  public void mouseClicked(MouseEvent ev) {
    // Convert the mouse event's coordinates from view to world coordinates. 
    double x = translateX(ev.getX());
    double y = translateY(ev.getY());
    
    // Retrieve the node that has been hit at the location. 
    Node v = getHitInfo(ev).getHitNode();
    
    // Test if the node is rendered by GroupNodeRealizer. 
    GroupNodeRealizer gnr = getGroupNodeRealizer(v);
    if (gnr != null) {
      // Get the state label. 
      NodeLabel stateLabel = gnr.getStateLabel();
      // Test, if the mouse event occured on the state icon. 
      if (stateLabel.getBox().contains(x, y)) {
        // Retrieve the HierarchyManager of the grouped graph.
        hm = HierarchyManager.getInstance(view.getGraph2D());
        
        if (hm.isFolderNode(v)) {
          // Invokes a customized OpenFolders Action implementation.
          createOpenFoldersAction(v).openFolders(view);
        }
        else {
          // Invokes a customized CloseGroups Action implementation.
          createCloseGroupsAction(v).closeGroups(view);
        }
      }
    }
  }
}
</pre></div>
            <p>
               The tutorial demo applications <a href="../../src/demo/view/hierarchy/HierarchyDemo.java" title="Link to demo code" target="_top">HierarchyDemo.java</a> 
               and <a href="../../src/demo/view/hierarchy/GroupingDemo.java" title="Link to demo code" target="_top">GroupingDemo.java</a> present further 
               examples of how to use the Action implementations. 
               
               Creation of new actions is shown in <a href="../../src/demo/view/hierarchy/GroupNavigationDemo.java" title="Link to demo code" target="_top">GroupNavigationDemo.java</a>.
               
            </p>
         </div>
      </div>
      <table class="copyright" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td align="right">
                  <p class="copyright">Copyright &copy;2004-2015, yWorks GmbH. All rights reserved.</p>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="navfooter">
         <div class="navline2"></div>
         <div style="display:none"><img src="figures/navline2.jpg" alt=""><img src="figures/navbg2.jpg" alt=""></div>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="hier_mvc_view.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="view_hierarchy.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="hier_events_and_listeners.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">View Implementations&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html" target="_top">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Events and Listeners</td>
            </tr>
         </table>
      </div>
   </body>
</html>
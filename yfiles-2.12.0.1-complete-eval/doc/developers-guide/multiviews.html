<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Multiple Views on a Common Model Graph</title>
      <link rel="stylesheet" href="ystyle.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
      <link rel="home" href="index.html" title="yFiles for Java Developer's Guide">
      <link rel="up" href="view.html" title="Chapter&nbsp;6.&nbsp;Displaying and Editing Graphs">
      <link rel="previous" href="view_events_and_listeners.html" title="Events and Listeners">
      <link rel="next" href="viewer_localviews.html" title="Local Views">
      <link rel="stylesheet" href="jsdt/toc.css" type="text/css"><script type="text/javascript" src="jsdt/jquery.min.js"></script><script type="text/javascript" src="jsdt/toc.js"></script><link type="text/css" rel="stylesheet" href="jssh/SyntaxHighlighter.css"><script type="text/javascript" src="jssh/shCore.js"></script><script type="text/javascript" src="jssh/shBrushJava.js"></script><script type="text/javascript" src="jssh/shBrushXml.js"></script><script type="text/javascript">
  function sh() {

    dp.SyntaxHighlighter.HighlightAll('programlisting', false, false, false, null, false);
  }
  </script></head>
   <body onload="sh()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Multiple Views on a Common Model Graph</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="view_events_and_listeners.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;6.&nbsp;Displaying and Editing Graphs</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="viewer_localviews.html">Next</a></td>
            </tr>
         </table>
         <div class="navline"></div>
         <div style="display:none"><img src="figures/navbg.jpg" alt=""><img src="figures/navline.jpg" alt=""></div>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="multiviews"></a>Multiple Views on a Common Model Graph
                  </h2>
               </div>
            </div>
            <div></div>
         </div><a class="indexterm" name="d0e30425"></a><a class="indexterm" name="d0e30430"></a><p>
            The yFiles library provides advanced support for establishing and managing 
            model-view relationships between graphs which allow to easily create mulitple 
            views on a common model graph.
            
         </p>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="multiviews_concept"></a>Concept
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               The concept that enables having multiple views on a common model graph bases on 
               the notion of model-view relationships between graphs. 
               
               A distinguished graph, the "model graph" whose content defines an actual model, 
               is connected by means of model-view relationships to an arbitrary number of 
               so-called "satellite graphs." 
               The satellite graphs all derive from the model graph, i.e., their contents 
               reflect that of the model graph either completely or only in part.
               
            </p>
            <p>
               In particular, model-view relationships comprise the following functionality: 
               
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     Automatic synchronization of the model to the views, where all satellite graphs 
                     are updated whenever nodes or edges are inserted into or removed from the model 
                     graph.
                     
                  </li>
                  <li>
                     Synchronization of a view to the model, where the model graph is updated 
                     whenever nodes or edges are inserted into or removed from a satellite graph.
                     
                     
                  </li>
                  <li>
                     Filtering on a per-view basis, such that a satellite graph only contains 
                     specific graph elements from the model graph.
                     
                  </li>
               </ul>
            </div>
            <p>
               
               
            </p>
            <p>
               A specialized case of multiple views is the local view
               which is especially useful for providing detail views of complex graphs. Local views are
               explained in <a href="viewer_localviews.html" title="Local Views">the section called &#8220;Local Views&#8221;</a>.
               
            </p>
            <p>
               <a href="multiviews.html#fig_multiviews" title="Figure&nbsp;6.64.&nbsp;Multiple views on a common model graph">Figure&nbsp;6.64, &#8220;Multiple views on a common model graph&#8221;</a> shows a screenshot of tutorial demo 
               application <a href="../../src/demo/view/advanced/ModelViewManagerDemo.java" title="Link to demo code" target="_top">ModelViewManagerDemo.java</a> 
               which has four Graph2DViews in a two-by-two arrangement. 
               
               The upper-left view shows the common model graph, the remaining views the 
               satellite graphs that are derived from it. 
               Each of the views uses a different layout algorithm for its graph.
               
            </p>
            <div class="figure"><a name="fig_multiviews"></a><p class="title"><b>Figure&nbsp;6.64.&nbsp;Multiple views on a common model graph</b></p>
               <div class="informaltable">
                  <center>
                     <table border="0">
                        <colgroup>
                           <col width="100%">
                        </colgroup>
                        <tbody>
                           <tr>
                              <td>
                                 <div class="mediaobject" align="center"><img src="figures/multiple_views_demo.jpg" align="middle" alt="Multiple views on a common model graph."></div>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <p>
               Note that the lower two satellite graphs seen in the screenshot present a 
               
               filtered subset of the model graph's elements: 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     In the lower-left view, only the nodes but no edges from the model graph are 
                     contained. 
                     
                  </li>
                  <li>
                     The lower-right view shows only those graph elements of the model graph that 
                     are created after the views have been initialized, i.e., initially, this view 
                     has an empty graph.
                     
                  </li>
               </ul>
            </div>
            <p>
               
               
            </p>
         </div><a class="indexterm" name="d0e30485"></a><a class="indexterm" name="d0e30492"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="cls_ModelViewManager"></a>Class ModelViewManager
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               
               Class <a href="../api/y/view/ModelViewManager.html" title="Link to API documentation" target="_top">ModelViewManager<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> is the central 
               instance that enables and manages multiple views on a common model graph. 
               It is responsible for establishing and maintaining the model-view relationships 
               between model graph and satellite graphs. 
               Specifically, this includes the mappings from model graph elements to satellite 
               graph elements, but also any automatic synchronization of structural graph 
               changes, i.e., insertion and removal of nodes and edges, from the model graph 
               to all satellite graphs and vice versa.
               
            </p>
            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Important</h3>
               <p>
                  Synchronization between model graph and satellite graphs is done using 
                  specialized graph listener implementations. 
                  It is strongly discouraged to invoke any hide or unhide operations on either 
                  model graph or satellite graphs, since this will prevent ModelViewManager from 
                  proper synchronization.
                  
               </p>
            </div>
            <p>
               Additionally, class ModelViewManager also provides support for filtering 
               whenever the model is synchronized to the views.
               
            </p>
            <p>
               <a href="multiviews.html#ex_creating_ModelViewManager" title="Example&nbsp;6.46.&nbsp;Creating a ModelViewManager instance for a model graph">Example&nbsp;6.46, &#8220;Creating a ModelViewManager instance for a model graph&#8221;</a> shows how to create a 
               ModelViewManager instance for a given graph that serves as the common model 
               graph.
               
            </p>
            <div class="example"><a name="ex_creating_ModelViewManager"></a><p class="title"><b>Example&nbsp;6.46.&nbsp;Creating a ModelViewManager instance for a model graph</b></p><pre class="programlisting java">
// 'myModelGraph' is of type y.base.Graph.

// Creating a ModelViewManager instance for the given model graph.
ModelViewManager mvManager = ModelViewManager.getInstance(myModelGraph);
</pre></div>
            <p>
               Establishing a model-view relationship using the ModelViewManager instance can then
               be done by means of one of the following methods:
               
               
            </p>
            <div class="techn_templ">
               <center>
                  <table width="100%" border="1">
                     <colgroup>
                        <col width="16%" align="left">
                        <col width="84%" align="left">
                     </colgroup>
                     <tbody valign="top">
                        <tr class="techn_api">
                           <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/ModelViewManager.html#createViewGraph(y.util.GraphCopier.CopyFactory, y.view.ModelViewManager.Filter, boolean)" title="Link to API documentation" target="_top">Graph createViewGraph(GraphCopier.CopyFactory factory,
                      ModelViewManager.Filter filter,
                      boolean updateModelOnStructuralChange)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/ModelViewManager.html#addViewGraph(y.base.Graph, y.view.ModelViewManager.Filter, boolean)" title="Link to API documentation" target="_top">void addViewGraph(Graph view,
                  ModelViewManager.Filter filter,
                  boolean updateModelOnStructuralChange)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                        </tr>
                        <tr class="spacing">
                           <td align="left">Description</td>
                           <td align="left">Methods for establishing model-view relationships.</td>
                        </tr>
                     </tbody>
                  </table>
               </center>
            </div><a class="indexterm" name="d0e30539"></a><div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="multiviews_synchronization"></a>Synchronization
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  Synchronization is the process of updating either the satellite graphs or the 
                  model graph whenever a structural change in the model or one of the views 
                  occurred. 
                  
                  Basically, this means that a copy of a node or an edge is created in the 
                  satellite graphs when a new node or edge is created in the model graph. 
                  Similarly, when a graph element edge is removed from the model graph, the 
                  corresponding graph element in the satellite graphs is removed, too.
                  
               </p>
               <p>
                  In order to create copies of a new model graph element in the views, 
                  <a href="graph_structure.html#graph_copying" title="Copying a Graph">GraphCopier.CopyFactory instances</a> are 
                  used. 
                  The copy factory that shall be used for a view can be given at creation time of 
                  the satellite graph. 
                  If no copy factory is set, an instance of 
                  <a href="mvc_model.html#view_copying" title="Copying a Graph2D">Graph2DCopyFactory.HierarchicGraph2DCopyFactory</a> 
                  is used by default.
                  
               </p>
               <p>
                  Synchronization takes place in either of two directions: 
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        From model graph to satellite graphs: happens automatically, but can 
                        additionally be triggered explicitly, too. 
                        
                     </li>
                     <li>
                        From a satellite graph back to the model graph: can optionally be enabled when 
                        establishing a model-view relationship to happen automatically. 
                        Additionally, explicit synchronization can be triggered, too.
                        
                     </li>
                  </ul>
               </div>
               <p>
                  
               </p>
               <p>
                  Observe carefully, that whenever a satellite graph's content is synchronized 
                  back to the model graph, the model graph in turn updates all views.
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/ModelViewManager.html#isUpdateModelOnStructuralChangeEnabled(y.base.Graph)" title="Link to API documentation" target="_top">boolean isUpdateModelOnStructuralChangeEnabled(Graph viewGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/ModelViewManager.html#setUpdateModelOnStructuralChangeEnabled(y.base.Graph, boolean)" title="Link to API documentation" target="_top">void setUpdateModelOnStructuralChangeEnabled(Graph viewGraph,
                                             boolean enabled)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Automatic synchronization back to the model.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/ModelViewManager.html#synchronizeModelToViewGraphs()" title="Link to API documentation" target="_top">void synchronizeModelToViewGraphs()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/ModelViewManager.html#synchronizeModelToViewGraph(y.base.Graph)" title="Link to API documentation" target="_top">void synchronizeModelToViewGraph(Graph viewGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Explicit synchronization to the views.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/ModelViewManager.html#synchronizeViewGraphToModel(y.base.Graph)" title="Link to API documentation" target="_top">void synchronizeViewGraphToModel(Graph viewGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Explicit synchronization back to the model.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div><a class="indexterm" name="d0e30611"></a><div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="multiviews_filtering"></a>Filtering
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  Filtering means the technique for determining what graph elements, i.e., what 
                  nodes or edges of the common model graph are also present in a specific 
                  satellite graph. 
                  
                  By default, all elements from the model graph are also in the satellite graphs.
                  
                  
                  Filtering is applied automatically when the model is synchronized to the views.
                  
               </p>
               <p>
                  A filter is defined by interface <a href="../api/y/view/ModelViewManager.Filter.html" title="Link to API documentation" target="_top">ModelViewManager.Filter<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  and can be associated with a satellite graph by means of the following setter method
                  or at creation time of the satellite graphs when a model-view relationship is established.
                  
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/ModelViewManager.html#getFilter(y.base.Graph)" title="Link to API documentation" target="_top">ModelViewManager.Filter getFilter(Graph viewGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/ModelViewManager.html#setFilter(y.base.Graph, y.view.ModelViewManager.Filter)" title="Link to API documentation" target="_top">void setFilter(Graph viewGraph, ModelViewManager.Filter filter)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Getter and setter methods for associating a filter with satellite graphs.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p>
                  For example, a filter that results in omitting all edges present in the model 
                  graph is shown in <a href="multiviews.html#ex_filter_noedges" title="Example&nbsp;6.47.&nbsp;Filter implementation that filters out all edges">Example&nbsp;6.47, &#8220;Filter implementation that filters out all edges&#8221;</a>.
                  
               </p>
               <div class="example"><a name="ex_filter_noedges"></a><p class="title"><b>Example&nbsp;6.47.&nbsp;Filter implementation that filters out all edges</b></p><pre class="programlisting java">
public class NoEdgesFilter implements ModelViewManager.Filter {
  public boolean acceptInsertion(final Node node) { return true; }
  public boolean acceptInsertion(final Edge edge) { return false; }

  public boolean acceptRetention(final Node node) { return true; }
  public boolean acceptRetention(final Edge edge) { return false; }

  public boolean acceptRemoval(final Node model) { return true; }
  public boolean acceptRemoval(final Edge model) { return true; }
}
</pre></div>
               <p>
                  Using filters is presented in tutorial demo application 
                  <a href="../../src/demo/view/advanced/ModelViewManagerDemo.java" title="Link to demo code" target="_top">ModelViewManagerDemo.java</a>.
                  
               </p>
            </div>
         </div>
      </div>
      <table class="copyright" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td align="right">
                  <p class="copyright">Copyright &copy;2004-2015, yWorks GmbH. All rights reserved.</p>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="navfooter">
         <div class="navline2"></div>
         <div style="display:none"><img src="figures/navline2.jpg" alt=""><img src="figures/navbg2.jpg" alt=""></div>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="view_events_and_listeners.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="view.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="viewer_localviews.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Events and Listeners&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html" target="_top">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Local Views</td>
            </tr>
         </table>
      </div>
   </body>
</html>
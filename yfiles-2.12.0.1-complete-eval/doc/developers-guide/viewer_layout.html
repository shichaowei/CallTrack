<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Automatic Layout</title>
      <link rel="stylesheet" href="ystyle.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
      <link rel="home" href="index.html" title="yFiles for Java Developer's Guide">
      <link rel="up" href="view.html" title="Chapter&nbsp;6.&nbsp;Displaying and Editing Graphs">
      <link rel="previous" href="advanced_stuff.html" title="Advanced Application Logic">
      <link rel="next" href="view_hierarchy.html" title="Chapter&nbsp;7.&nbsp;Graph Hierarchies">
      <link rel="stylesheet" href="jsdt/toc.css" type="text/css"><script type="text/javascript" src="jsdt/jquery.min.js"></script><script type="text/javascript" src="jsdt/toc.js"></script><link type="text/css" rel="stylesheet" href="jssh/SyntaxHighlighter.css"><script type="text/javascript" src="jssh/shCore.js"></script><script type="text/javascript" src="jssh/shBrushJava.js"></script><script type="text/javascript" src="jssh/shBrushXml.js"></script><script type="text/javascript">
  function sh() {

    dp.SyntaxHighlighter.HighlightAll('programlisting', false, false, false, null, false);
  }
  </script></head>
   <body onload="sh()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Automatic Layout</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="advanced_stuff.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;6.&nbsp;Displaying and Editing Graphs</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="view_hierarchy.html">Next</a></td>
            </tr>
         </table>
         <div class="navline"></div>
         <div style="display:none"><img src="figures/navbg.jpg" alt=""><img src="figures/navline.jpg" alt=""></div>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="viewer_layout"></a>Automatic Layout
                  </h2>
               </div>
            </div>
            <div></div>
         </div><a class="indexterm" name="d0e31670"></a><a class="indexterm" name="d0e31675"></a><p>
            
         </p><a class="indexterm" name="d0e31684"></a><a class="indexterm" name="d0e31691"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="cls_Graph2DLayoutExecutor"></a>Class Graph2DLayoutExecutor
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Class <a href="../api/y/view/Graph2DLayoutExecutor.html" title="Link to API documentation" target="_top">Graph2DLayoutExecutor<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> is a convenience 
               class to facilitate layout calculation of a Graph2D. 
               It can be used to reduce the code necessary for automatic layout setup in many common 
               situations to a minimum. 
               Especially in conjunction with grouped graphs, Graph2DLayoutExecutor is well-suited 
               to save setup code.
               
            </p>
            <p>
               Basically, Graph2DLayoutExecutor takes a <a href="../api/y/view/Graph2D.html" title="Link to API documentation" target="_top">Graph2D<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
               and a <a href="../api/y/layout/Layouter.html" title="Link to API documentation" target="_top">Layouter<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> implementation and runs the 
               layout algorithm using the graph as the input. 
               
               Prior to starting the layout algorithm, Graph2DLayoutExecutor performs several common 
               setup and configuration steps. 
               By default, it: 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     fills and registers data providers with information about selected graph elements
                     
                  </li>
                  <li>
                     sets up any grouping information held by the HierarchyManager that is associated 
                     with the graph (uses a <a href="hier_layout.html" title="Automatic Layout">GroupLayoutConfigurator</a> 
                     internally)
                     
                  </li>
                  <li>
                     creates strong port constraints for edge ends that connect to node ports (uses a
                     <a href="realizer_related.html#nodeports" title="Node Ports">NodePortLayoutConfigurator</a> internally)
                     
                  </li>
                  <li>
                     uses the same scheme as layout stage BufferedLayouter to <a href="layout_concepts.html#buffering" title="Using Buffered Layout">perform the actual layout calculation in buffered mode</a></li>
                  <li>
                     creates and attaches a default abort handler with the graph that can be used to 
                     <a href="layout_concepts.html#aborthandler" title="Abort Mechanism for Layout Calculations">trigger early termination of the layout calculation</a></li>
               </ul>
            </div>
            <p>
               
               Additionally, by default the layout is also nicely <a href="advanced_stuff.html#morphing" title="Layout Morphing">morphed in an animated fashion</a> 
               using a LayoutMorpher.
               
            </p>
            <p>
               As an option in conjunction with <a href="incremental_hierarchical_layouter.html#ihl_swimlanes" title="Swimlane Layout">swimlane layout of diagrams using TableGroupNodeRealizer</a>, 
               Graph2DLayoutExecutor can also convert relevant parts of the table structure model 
               of any TableGroupNodeRealizer in the graph for the layouter (uses a <a href="tabular_data_layout.html" title="Automatic Layout">TableLayoutConfigurator</a> 
               internally).
               
            </p>
            <div class="example"><a name="ex_Graph2DLayoutExecutor"></a><p class="title"><b>Example&nbsp;6.55.&nbsp;Using Graph2DLayoutExecutor</b></p><pre class="programlisting java">
// 'graph' is of type y.view.Graph2D.

new Graph2DLayoutExecutor(Graph2DLayoutExecutor.BUFFERED).doLayout(graph,
     new IncrementalHierarchicLayouter());
</pre></div>
            <p>
               Whether a graph layout result is morphed or not, or the layout calculation is done 
               asynchronously or not, can be specified using the Graph2DLayoutExecutor's mode property. 
               The mode is given either at creation or using the <a href="../api/y/view/Graph2DLayoutExecutor.html#setMode(byte)" title="Link to API documentation" target="_top">setMode<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
               method. 
               Whether the GroupLayoutConfigurator or TableLayoutConfigurator are actually used 
               can be controlled, too.
               
            </p>
            <div class="techn_templ">
               <center>
                  <table width="100%" border="1">
                     <colgroup>
                        <col width="16%" align="left">
                        <col width="84%" align="left">
                     </colgroup>
                     <tbody valign="top">
                        <tr class="techn_api">
                           <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/Graph2DLayoutExecutor.html#setConfiguringGrouping(boolean)" title="Link to API documentation" target="_top">void setConfiguringGrouping(boolean configuringGrouping)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DLayoutExecutor.html#setConfiguringTableNodeRealizers(boolean)" title="Link to API documentation" target="_top">void setConfiguringTableNodeRealizers(boolean configuringTableNodeRealizers)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DLayoutExecutor.html#setConfiguringNodePorts(boolean)" title="Link to API documentation" target="_top">void setConfiguringNodePorts(boolean configuringNodePorts)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                        </tr>
                        <tr class="spacing">
                           <td align="left">Description</td>
                           <td align="left">
                              Controls whether grouping information and table structure information is prepared,
                              and whether strong ports constraints are created from node ports.
                              By default, configuration of table structure information is disabled, the other
                              options are enabled.
                              
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </center>
            </div>
            <p>
               The following methods can be used to invoke the layout calculation using the given 
               Layouter implementation on the given Graph2D, respectively the Graph2D in the given 
               Graph2DView.
               
            </p>
            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Important</h3>
               <p>
                  Animation of the layout can only occur if there is a view where the animation can 
                  take place. 
                  As a consequence, the methods that take a Graph2D only cannot be used to morph the 
                  layout result, even if the mode property is set otherwise.
                  
               </p>
            </div>
            <div class="techn_templ">
               <center>
                  <table width="100%" border="1">
                     <colgroup>
                        <col width="16%" align="left">
                        <col width="84%" align="left">
                     </colgroup>
                     <tbody valign="top">
                        <tr class="techn_api">
                           <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2D, y.layout.Layouter)" title="Link to API documentation" target="_top">void doLayout(Graph2D graph, Layouter layouter)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2D, y.layout.Layouter, java.lang.Runnable, y.view.Graph2DLayoutExecutor.ExceptionListener)" title="Link to API documentation" target="_top">LayoutThreadHandle doLayout(Graph2D graph, Layouter layouter,
                            Runnable doneListener, 
                            ExceptionListener exceptionListener)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2DView, y.layout.Layouter)" title="Link to API documentation" target="_top">void doLayout(Graph2DView view, Layouter layouter)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2DView, y.layout.Layouter, java.lang.Runnable, y.view.Graph2DLayoutExecutor.ExceptionListener)" title="Link to API documentation" target="_top">LayoutThreadHandle doLayout(Graph2DView view, Layouter layouter,
                            Runnable doneListener, 
                            ExceptionListener exceptionListener)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                        </tr>
                        <tr class="spacing">
                           <td align="left">Description</td>
                           <td align="left">
                              Invokes the automatic layout calculation on the given Graph2D, respectively the 
                              Graph2D in the given Graph2DView.
                              
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </center>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="cls_Graph2DLayoutExecutor_async"></a>Asynchronous Layout
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  Asynchronous layout calculation allows the application to be responsive while the layout is calculated.
                  It also offers the possibility to display a progress bar or stop the layout calculation by stopping the layout thread.
                  
               </p>
               <p>
                  Setting the mode property to <a href="../api/y/view/Graph2DLayoutExecutor.html#THREADED" title="Link to API documentation" target="_top">THREADED<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  or <a href="../api/y/view/Graph2DLayoutExecutor.html#ANIMATED_THREADED" title="Link to API documentation" target="_top">ANIMATED_THREADED<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> lets the executor
                  perform the layout calculations in a separate thread. In that case, the
                  <a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2D, y.layout.Layouter, java.lang.Runnable, y.view.Graph2DLayoutExecutor.ExceptionListener)" title="Link to API documentation" target="_top">doLayout()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  method returns immediately.
                  
               </p>
               <p>
                  It is recommended to use the <a href="../api/y/view/Graph2DLayoutExecutor.html#doLayout(y.view.Graph2D, y.layout.Layouter, java.lang.Runnable, y.view.Graph2DLayoutExecutor.ExceptionListener)" title="Link to API documentation" target="_top">doLayout()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  methods that take a Runnable and a <a href="../api/y/view/Graph2DLayoutExecutor.ExceptionListener.html" title="Link to API documentation" target="_top">Graph2DLayoutExecutor.ExceptionListener<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  for asynchronous layout calculation. These methods add the possibility to get notified about the layout progress:
                  based on whether an exception has occurred or not, when the layout calculation has 
                  ended, the ExceptionListener is invoked. 
                  The Runnable is invoked in either case.
                  
               </p>
               <p>
                  While performing an asynchronous layout it is advisable to lock the view such that no concurrent modification
                  can be done by the user. Locking the view has to be enabled by
                  <a href="../api/y/view/Graph2DLayoutExecutor.html#setLockingView(boolean)" title="Link to API documentation" target="_top">void setLockingView(true)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>.
                  If locking is enabled, the view will be locked automatically when the layout is started and unlocked after the
                  layout is completed.
                  
               </p>
               <p>
                  The <a href="../api/y/view/Graph2DLayoutExecutor.LayoutThreadHandle.html" title="Link to API documentation" target="_top">Graph2DLayoutExecutor.LayoutThreadHandle<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> which is returned by
                  doLayout can be used to stop/cancel the layout. Its method
                  <a href="../api/y/view/Graph2DLayoutExecutor.LayoutThreadHandle.html#cancel()" title="Link to API documentation" target="_top">cancel()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> tries to cancel
                  the running layout. If it is not possible to stop the layout safely, the layout won't be canceled.
                  The method <a href="../api/y/view/Graph2DLayoutExecutor.LayoutThreadHandle.html#isRunning()" title="Link to API documentation" target="_top">isRunning()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
                  can be used to determine whether the layout is still running.
                  
               </p>
               <p>
                  The LayoutThreadHandle also provides access to the <tt class="code">Thread</tt> instance 
                  itself through the <a href="../api/y/view/Graph2DLayoutExecutor.LayoutThreadHandle.html#getThread()" title="Link to API documentation" target="_top">getThread()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
                  method. 
                  The Thread instance can be used to change the thread's priority, for example, or 
                  to suspend it. 
                  It is also possible to stop the layout by directly stopping the thread as shown 
                  in <a href="viewer_layout.html#ex_stopping_layout_thread" title="Example&nbsp;6.56.&nbsp;Stopping a layout thread via the LayoutThreadHandle">Example&nbsp;6.56, &#8220;Stopping a layout thread via the LayoutThreadHandle&#8221;</a>, if canceling the layout fails.
                  
               </p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     Stopping the thread directly should be used with care. 
                     It may cause problems in some environments, most notably when using a debugger.
                     
                  </p>
               </div>
               <div class="example"><a name="ex_stopping_layout_thread"></a><p class="title"><b>Example&nbsp;6.56.&nbsp;Stopping a layout thread via the LayoutThreadHandle</b></p><pre class="programlisting java">
// 'handle' is of type y.view.Graph2DLayoutExecutor.LayoutThreadHandle.

handle.getThread().stop();
</pre></div>
            </div>
         </div><a class="indexterm" name="d0e31857"></a><a class="indexterm" name="d0e31864"></a><a class="indexterm" name="d0e31869"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="viewer_layout_view"></a>Graph2DView Support for Automatic Layout
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Class Graph2DView provides convenience functionality to directly invoke an automatic 
               layout calculation on the Graph2D it is holding. 
               The following methods use the services of <a href="viewer_layout.html#cls_Graph2DLayoutExecutor" title="Class Graph2DLayoutExecutor">class Graph2DLayoutExecutor</a>.
               
            </p>
            <div class="techn_templ">
               <center>
                  <table width="100%" border="1">
                     <colgroup>
                        <col width="16%" align="left">
                        <col width="84%" align="left">
                     </colgroup>
                     <tbody valign="top">
                        <tr class="techn_api">
                           <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/Graph2DView.html#applyLayout(y.layout.Layouter)" title="Link to API documentation" target="_top">void applyLayout(Layouter layouter)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/Graph2DView.html#applyLayoutAnimated(y.layout.Layouter)" title="Link to API documentation" target="_top">void applyLayoutAnimated(Layouter layouter)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                        </tr>
                        <tr class="spacing">
                           <td align="left">Description</td>
                           <td align="left">Invokes automatic layout calculation on the view's Graph2D.</td>
                        </tr>
                     </tbody>
                  </table>
               </center>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="tutorial_Graph2DLayoutExecutor"></a>Tutorial Demo Code
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  The tutorial demo application
                  <a href="../../src/demo/layout/Graph2DLayoutExecutorDemo.java" title="Link to demo code" target="_top">Graph2DLayoutExecutorDemo.java</a> gives a
                  detailed demonstration on how to use and set up the Graph2DLayoutExecutor.
                  It shows in particular the aspects of an asynchronous layout like locking the view,
                  displaying a progress bar and cancelling a running layout upon user interaction. 
                  
               </p>
            </div>
         </div>
      </div>
      <table class="copyright" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td align="right">
                  <p class="copyright">Copyright &copy;2004-2015, yWorks GmbH. All rights reserved.</p>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="navfooter">
         <div class="navline2"></div>
         <div style="display:none"><img src="figures/navline2.jpg" alt=""><img src="figures/navbg2.jpg" alt=""></div>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="advanced_stuff.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="view.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="view_hierarchy.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Advanced Application Logic&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html" target="_top">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Graph Hierarchies</td>
            </tr>
         </table>
      </div>
   </body>
</html>
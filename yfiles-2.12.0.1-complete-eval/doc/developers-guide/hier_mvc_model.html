<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Managing Graph Hierarchies</title>
      <link rel="stylesheet" href="ystyle.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
      <link rel="home" href="index.html" title="yFiles for Java Developer's Guide">
      <link rel="up" href="view_hierarchy.html" title="Chapter&nbsp;7.&nbsp;Graph Hierarchies">
      <link rel="previous" href="hier_uses.html" title="Working with Graph Hierarchies">
      <link rel="next" href="hier_realizers.html" title="Node Realizers">
      <link rel="stylesheet" href="jsdt/toc.css" type="text/css"><script type="text/javascript" src="jsdt/jquery.min.js"></script><script type="text/javascript" src="jsdt/toc.js"></script><link type="text/css" rel="stylesheet" href="jssh/SyntaxHighlighter.css"><script type="text/javascript" src="jssh/shCore.js"></script><script type="text/javascript" src="jssh/shBrushJava.js"></script><script type="text/javascript" src="jssh/shBrushXml.js"></script><script type="text/javascript">
  function sh() {

    dp.SyntaxHighlighter.HighlightAll('programlisting', false, false, false, null, false);
  }
  </script></head>
   <body onload="sh()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Managing Graph Hierarchies</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="hier_uses.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;7.&nbsp;Graph Hierarchies</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="hier_realizers.html">Next</a></td>
            </tr>
         </table>
         <div class="navline"></div>
         <div style="display:none"><img src="figures/navbg.jpg" alt=""><img src="figures/navline.jpg" alt=""></div>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="hier_mvc_model"></a>Managing Graph Hierarchies
                  </h2>
               </div>
            </div>
            <div></div>
         </div>
         <p>
            The management of a graph hierarchy is a multi-faceted undertaking that is 
            handled by a small number of classes. 
            Adding support for grouping and nesting to a "flat" graph can easily be 
            achieved with little effort. 
            
            
         </p>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="cls_HierarchyManager"></a>Class HierarchyManager
                     </h3>
                  </div>
               </div>
               <div></div>
            </div><a class="indexterm" name="d0e32139"></a><p>
               Class <a href="../api/y/view/hierarchy/HierarchyManager.html" title="Link to API documentation" target="_top">HierarchyManager<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
               maintains the model that is behind graph hierarchies, and manages all changes 
               relevant to this model. 
               
               Among other things, the HierarchyManager's responsibilities include: 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     Creation and removal of group nodes and folder nodes 
                     
                  </li>
                  <li>
                     Grouping and ungrouping nodes 
                     
                  </li>
                  <li>
                     Nesting and un-nesting of graph structures 
                     
                  </li>
                  <li>
                     Creation of a folder node's inner graph 
                     
                  </li>
                  <li>
                     Handling of inter-edges 
                     
                  </li>
                  <li>
                     Maintenance of the node visiting order for both hit-testing and drawing the 
                     graph elements 
                     
                  </li>
                  <li>
                     Provision of graph element information 
                     
                  </li>
               </ul>
            </div>
            <p>
               
               
            </p>
            <p>
               Adding support for both grouping and nesting to a graph is achieved by creating 
               a HierarchyManager instance that is associated with a given graph, which is considered
               the hierarchy's root graph. 
               
               <a href="hier_mvc_model.html#hier_creating" title="Example&nbsp;7.1.&nbsp;Adding support for grouping and nesting to a graph">Example&nbsp;7.1, &#8220;Adding support for grouping and nesting to a graph&#8221;</a> demonstrates how to add a HierarchyManager instance
               to a yet "flat" graph, i.e., one that lacks support for grouping or nesting.
               
            </p>
            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Important</h3>
               <p>
                  There must not be more than one HierarchyManager associated with a given graph. 
                  
                  
               </p>
            </div>
            <div class="example"><a name="hier_creating"></a><p class="title"><b>Example&nbsp;7.1.&nbsp;Adding support for grouping and nesting to a graph</b></p><pre class="programlisting java">
// 'rootGraph' is of type y.view.Graph2D.

// Create a hierarchy manager with the given graph.
HierarchyManager hm = new HierarchyManager(rootGraph);
</pre></div>
            <p>
               Access to the HierarchyManager associated with a graph is provided through the following
               static method of class HierarchyManager:
               
            </p>
            <div class="techn_templ">
               <center>
                  <table width="100%" border="1">
                     <colgroup>
                        <col width="16%" align="left">
                        <col width="84%" align="left">
                     </colgroup>
                     <tbody valign="top">
                        <tr class="techn_api">
                           <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#getInstance(y.base.Graph)" title="Link to API documentation" target="_top">static HierarchyManager getInstance(Graph graph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                        </tr>
                        <tr class="spacing">
                           <td align="left">Description</td>
                           <td align="left">Returns the HierarchyManager instance associated with the given graph.</td>
                        </tr>
                     </tbody>
                  </table>
               </center>
            </div>
            <p>
               In order to keep the model it is maintaining synchronized and consistent, 
               HierarchyManager relies on events that signal graph structure changes. 
               The GraphListener that is used to listen for these events is registered with 
               the root graph at HierarchyManager creation time. 
               By means of 
               <a href="hier_mvc_model.html#cls_DefaultHierarchyGraphFactory" title="Class DefaultHierarchyGraphFactory">class DefaultHierarchyGraphFactory</a>, 
               which, among other things, is used by the HierarchyManager to create so-called 
               inner graphs (<a href="hier_mvc_model.html#hier_folders" title="Creating Nested Graphs">see below</a>), this listener is 
               ultimately registered with all graphs in a graph hierarchy.
               
            </p>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_hierarchical_structure"></a>Graph Hierarchy
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div><a class="indexterm" name="d0e32205"></a><a class="indexterm" name="d0e32208"></a><p>
                  A graph hierarchy consists of normal nodes, group nodes with their contents, and
                  folder nodes.
                  Group nodes and folder nodes are special proxy elements that can only be created
                  by the HierarchyManager:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#createGroupNode(y.base.Node)" title="Link to API documentation" target="_top">Node createGroupNode(Node parentNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#createGroupNode(y.base.Graph)" title="Link to API documentation" target="_top">Node createGroupNode(Graph parentGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Methods to create a group node.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#createFolderNode(y.base.Node)" title="Link to API documentation" target="_top">Node createFolderNode(Node parentNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#createFolderNode(y.base.Graph)" title="Link to API documentation" target="_top">Node createFolderNode(Graph parentGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Methods to create a folder node.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p>
                  Both group nodes as well as folder nodes can also be created by converting normal
                  nodes:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#convertToGroupNode(y.base.Node)" title="Link to API documentation" target="_top">void convertToGroupNode(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Converts a normal node to a group node.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#convertToFolderNode(y.base.Node)" title="Link to API documentation" target="_top">void convertToFolderNode(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#convertToFolderNode(y.base.Node, y.base.Graph)" title="Link to API documentation" target="_top">void convertToFolderNode(Node node, Graph innerGraph)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Methods to convert a normal node to a folder node.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p>
                  The following getter methods can be used to query what kind a given node is:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#isGroupNode(y.base.Node)" title="Link to API documentation" target="_top">boolean isGroupNode(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#isFolderNode(y.base.Node)" title="Link to API documentation" target="_top">boolean isFolderNode(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#isNormalNode(y.base.Node)" title="Link to API documentation" target="_top">boolean isNormalNode(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p><a name="p_HierarchyManager_setParent"></a>
                  To add content to a group node or a folder node, the following methods can be used:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#setParentNode(y.base.Node, y.base.Node)" title="Link to API documentation" target="_top">void setParentNode(Node node, Node parentNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#setParentNode(y.base.NodeList, y.base.Node)" title="Link to API documentation" target="_top">void setParentNode(NodeList nodeList, Node parentNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">
                                 Methods to set the parent node for a given (list of) node(s).
                                 The parent node may either be a group node or a folder node, or <tt class="code">null</tt>,
                                 which denotes the root graph.
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p>
                  The contents can afterwards be queried using:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#getChildren(y.base.Node)" title="Link to API documentation" target="_top">NodeCursor getChildren(Node node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">
                                 Returns the grouped nodes when given a group node or the nodes in the inner graph 
                                 when given a folder node.
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_groups"></a>Creating Grouped Nodes
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div><a class="indexterm" name="d0e32342"></a><p>
                  Conceptually, grouped nodes are one level below their containing group node in 
                  the graph hierarchy. 
                  Technically, however, they are in the same graph as their enclosing group node. 
                  
               </p>
               <p>
                  Nodes can be grouped within a group node using the above <a href="hier_mvc_model.html#p_HierarchyManager_setParent">setParent</a>
                  methods as well as the following method, which maintains the existing hierarchical
                  structure of the given nodes.
                  
                  <a href="hier_mvc_model.html#ex_grouping" title="Example&nbsp;7.2.&nbsp;Grouping nodes">Example&nbsp;7.2, &#8220;Grouping nodes&#8221;</a> shows the creation of a group node and how to add
                  content to it.
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#groupSubgraph(y.base.NodeList, y.base.Node)" title="Link to API documentation" target="_top">void groupSubgraph(NodeList subgraphNodeList, Node groupNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">
                                 Sets the given group node as the common ancestor of the nodes from the given subgraph
                                 structure.
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <div class="example"><a name="ex_grouping"></a><p class="title"><b>Example&nbsp;7.2.&nbsp;Grouping nodes</b></p><pre class="programlisting java">
// 'hm' is of type y.view.hierarchy.HierarchyManager.

// Create a new node in the root graph that is a group node.
Node groupNode = hm.createGroupNode(rootGraph);

NodeList nl = new NodeList();
// Create some (normal) nodes in the root graph also.
for (int i = 0; i &lt; 3; i++) {
  nl.add(rootGraph.createNode());
}

// Add them to the group node by setting it their parent node.
hm.setParentNode(nl, groupNode);

nl.clear();
// Create another node in the root graph.
nl.add(rootGraph.createNode());

// Add this single node to the group node also.
hm.groupSubgraph(nl, groupNode);
</pre></div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_folders"></a>Creating Nested Graphs
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div><a class="indexterm" name="d0e32380"></a><p>
                  Conceptually, a nested graph structure is contained within its folder node. 
                  In the graph hierarchy, it is one level below its folder node, and is 
                  accordingly called the inner graph of the folder node. 
                  
                  Technically, however, a nested graph structure is a proper graph that is stored 
                  separately from its parent graph, i.e., the graph where the folder node resides 
                  in. 
                  
               </p>
               <p>
                  The folder node within the parent graph serves as an anchor for the nested 
                  graph structure. 
                  This is why a folder node is also called an anchor node sometimes.
                  
               </p>
               <p>
                  Nodes can be nested within a folder node using the above <a href="hier_mvc_model.html#p_HierarchyManager_setParent">setParent</a>
                  methods as well as the following method.
                  
                  <a href="hier_mvc_model.html#ex_nesting" title="Example&nbsp;7.3.&nbsp;Nesting nodes">Example&nbsp;7.3, &#8220;Nesting nodes&#8221;</a> shows the creation of a folder node and how to add
                  content to it.
                  Also, extracting a nested graph structure from a folder node is shown, too.
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#foldSubgraph(y.base.NodeList, y.base.Node)" title="Link to API documentation" target="_top">void foldSubgraph(NodeList subgraphNodeList, Node folderNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">
                                 Transfers the subgraph induced by the given nodes to the given folder node's inner
                                 graph.
                                 Also creates inter-edges from edges where only one end is in the inner graph after
                                 the transfer.
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <div class="example"><a name="ex_nesting"></a><p class="title"><b>Example&nbsp;7.3.&nbsp;Nesting nodes</b></p><pre class="programlisting java">
// 'hm' is of type y.view.hierarchy.HierarchyManager. 

// Create a new node in the root graph that is a folder node.
Node folderNode = hm.createFolderNode(rootGraph);

NodeList nl = new NodeList();
// Create some (normal) nodes in the root graph also.
for (int i = 0; i &lt; 3; i++) {
  nl.add(rootGraph.createNode());
}

// Add them to the folder node by setting it their parent node.
hm.setParentNode(nl, folderNode);

nl.clear();
// Create another node in the root graph.
nl.add(rootGraph.createNode());

// Add this single node to the folder node also.
hm.foldSubgraph(nl, folderNode);

// Move the node added last up one level back to the parent graph.
hm.unfoldSubGraph(hm.getInnerGraph(folderNode), nl);
</pre></div>
               <p>
                  
                  Whenever the HierarchyManager is asked to populate a folder node, the involved 
                  nodes are removed from their original graph and created anew inside the folder 
                  node's inner graph. 
                  
               </p>
               <p>
                  Access to a folder node's inner graph is provided through:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#getInnerGraph(y.base.Node)" title="Link to API documentation" target="_top">Graph getInnerGraph(Node folderNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Returns the inner graph of a folder node.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_inters"></a>Handling Inter-edges
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  In a grouped graph that contains folder nodes, there can also occur edges that connect
                  nodes from inner graphs to nodes from other graphs within the graph hierarchy. 
                  
                  Generally, these edges have to be remodeled to connect nodes that are on the 
                  same hierarchy level, since an edge whose nodes are in different graphs is not 
                  legal. 
                  
               </p>
               <p>
                  Remodeling an edge to an inter-edge that represents its original is 
                  automatically done by the HierarchyManager. 
                  Both edge ends are promoted to the nearest common graph up in the hierarchy 
                  that contains all folder nodes of the involved inner graphs. 
                  
               </p>
               <p>
                  The HierarchyManager afterwards provides information on the "real" source and 
                  target of the inter-edge. 
                  
                  The following methods return the real source and target of an inter-edge:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#getRealSource(y.base.Edge)" title="Link to API documentation" target="_top">Node getRealSource(Edge interEdge)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Returns the real source node associated with the given inter-edge.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#getRealTarget(y.base.Edge)" title="Link to API documentation" target="_top">Node getRealTarget(Edge interEdge)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Returns the real target node associated with the given inter-edge.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_order"></a>Node Visiting Order
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  The HierarchyManager instance that has been added to a graph is also 
                  responsible for maintaining the node visiting order that is used, e.g., for 
                  drawing or for hit-testing the graph elements. 
                  
                  The following methods provide a way to affect the node visiting order by changing
                  the order of children of either group node or folder node:
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#moveToFirst(y.base.Node)" title="Link to API documentation" target="_top">void moveToFirst(Node childNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Makes the given node the first child of its parent.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#moveToLast(y.base.Node)" title="Link to API documentation" target="_top">void moveToLast(Node childNode)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Makes the given node the last child of its parent.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Important</h3>
                  <p>
                     The visiting order that is maintained by class HierarchyManager is not preserved
                     when the grouped graph is saved to a file.
                     
                  </p>
               </div>
               <p>
                  
                  To preserve the visiting order between file export and import, all 
                  HierarchyManager operations that affect the node order have to be accompanied 
                  by corresponding <a href="../api/y/base/Graph.html" title="Link to API documentation" target="_top">Graph<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> operations on the 
                  particular graph (root graph or nested graph). 
                  
                  See <a href="hier_mvc_model.html#node_order" title="Table&nbsp;7.1.&nbsp;Corresponding node order methods">Table&nbsp;7.1, &#8220;Corresponding node order methods&#8221;</a>. 
                  
               </p>
               <div class="table"><a name="node_order"></a><p class="title"><b>Table&nbsp;7.1.&nbsp;Corresponding node order methods</b></p>
                  <table summary="Corresponding node order methods" width="100%" border="1">
                     <colgroup>
                        <col width="50%" align="left">
                        <col width="50%" align="left">
                     </colgroup>
                     <thead valign="top">
                        <tr>
                           <th align="left">HierarchyManager</th>
                           <th align="left">Graph</th>
                        </tr>
                     </thead>
                     <tbody valign="top">
                        <tr>
                           <td align="left"><a href="../api/y/view/hierarchy/HierarchyManager.html#moveToFirst(y.base.Node)" title="Link to API documentation" target="_top">moveToFirst(Node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                           <td align="left"><a href="../api/y/base/Graph.html#moveToFirst(y.base.Node)" title="Link to API documentation" target="_top">moveToFirst(Node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                        </tr>
                        <tr>
                           <td align="left"><a href="../api/y/view/hierarchy/HierarchyManager.html#moveToLast(y.base.Node)" title="Link to API documentation" target="_top">moveToLast(Node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                           <td align="left"><a href="../api/y/base/Graph.html#moveToLast(y.base.Node)" title="Link to API documentation" target="_top">moveToLast(Node)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a></td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a name="hier_traversal"></a>Traversal Policies
                        </h4>
                     </div>
                  </div>
                  <div></div>
               </div>
               <p>
                  Class HierarchyManager offers two different node traversal orders which can be applied
                  to a grouped graph:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        Pre-traverse visits the parent before the children, and the children themselves 
                        from first to last. 
                        
                     </li>
                     <li>
                        Post-visit visits the children before the parent, and the children themselves 
                        from last to first. 
                        
                     </li>
                  </ul>
               </div>
               <p>
                  
                  Following are HierarchyManager's methods for both traversal policies:
                  
                  
                  
                  
               </p>
               <div class="techn_templ">
                  <center>
                     <table width="100%" border="1">
                        <colgroup>
                           <col width="16%" align="left">
                           <col width="84%" align="left">
                        </colgroup>
                        <tbody valign="top">
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#postTraverse(y.view.hierarchy.HierarchyManager.NodeVisitor)" title="Link to API documentation" target="_top">void postTraverse(HierarchyManager.NodeVisitor visitor)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#postTraverse(y.base.Node, y.view.hierarchy.HierarchyManager.NodeVisitor)" title="Link to API documentation" target="_top">void postTraverse(Node rootNode, HierarchyManager.NodeVisitor visitor)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Node traversal used for drawing.</td>
                           </tr>
                           <tr class="techn_api">
                              <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/view/hierarchy/HierarchyManager.html#preTraverse(y.view.hierarchy.HierarchyManager.NodeVisitor)" title="Link to API documentation" target="_top">void preTraverse(HierarchyManager.NodeVisitor visitor)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/view/hierarchy/HierarchyManager.html#preTraverse(y.base.Node, y.view.hierarchy.HierarchyManager.NodeVisitor)" title="Link to API documentation" target="_top">void preTraverse(Node rootNode, HierarchyManager.NodeVisitor visitor)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                           </tr>
                           <tr class="spacing">
                              <td align="left">Description</td>
                              <td align="left">Node traversal used for hit-testing.</td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <p>
                  Pre-traverse is used, e.g., for drawing the nodes of a grouped graph, since it makes
                  sure that children are drawn atop their parents. 
                  
                  Post-traverse on the other hand, is useful for hit-testing the graph elements, 
                  since elements atop of others should receive hit events first. 
                  
               </p>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="cls_DefaultHierarchyGraphFactory"></a>Class DefaultHierarchyGraphFactory
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Class 
               <a href="../api/y/view/hierarchy/DefaultHierarchyGraphFactory.html" title="Link to API documentation" target="_top">DefaultHierarchyGraphFactory<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> is 
               used by HierarchyManager to have new graph elements within the grouped graph created
               and properly configured. 
               
               The graph factory handles creation of both normal graph elements as well as 
               nested graph structures (i.e., the inner graph of a folder node). 
               It also creates and configures the corresponding proxy nodes, i.e., group nodes 
               and folder nodes.
               
            </p>
            <p>
               Nested graph structures created by DefaultHierarchyGraphFactory are of type 
               <a href="../api/y/view/Graph2D.html" title="Link to API documentation" target="_top">Graph2D<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>, the realizer implementations 
               taken for group nodes and folder nodes can be controlled using appropriate 
               methods. 
               
               By default, class 
               <a href="../api/y/view/hierarchy/GroupNodeRealizer.html" title="Link to API documentation" target="_top">GroupNodeRealizer<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> is used for 
               both group nodes and folder nodes, since it can render both presentations. 
               See also <a href="hier_realizers.html" title="Node Realizers">the section called &#8220;Node Realizers&#8221;</a>. 
               
            </p>
            <div class="figure"><a name="hier_graph_factory"></a><p class="title"><b>Figure&nbsp;7.4.&nbsp;Class DefaultHierarchyGraphFactory</b></p>
               <div class="informaltable">
                  <center>
                     <table border="0">
                        <colgroup>
                           <col width="100%">
                        </colgroup>
                        <tbody>
                           <tr>
                              <td>
                                 <div class="mediaobject" align="center"><img src="figures/hierarchy_graph_factory.jpg" align="middle" alt="Class DefaultHierarchyGraphFactory."></div>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <p>
               Whenever a new graph is created by this graph factory, it will inherit all 
               listeners that are registered with its parent graph, i.e., all GraphListener, 
               Graph2DListener, and Graph2DSelectionListener references are copied. 
               
               In particular, this copies the GraphListener that is needed by HierarchyManager 
               in order to keep its model of the hierarchic structure synchronized over to any 
               inner graph that is created in conjunction with a folder node.
               
            </p>
            <p>
               To control the creation of graph objects the instance of DefaultGraphFactory 
               that is used can be replaced with a customized factory using the appropriate 
               method of class HierarchyManager. 
               
            </p>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="tutorial_HierarchyManager"></a>Tutorial Demo Code
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               <a href="../../src/demo/view/hierarchy/HierarchyDemo.java" title="Link to demo code" target="_top">HierarchyDemo.java</a> is an extensive tutorial 
               demo application that discusses all aspects of graph hierarchies and in particular 
               shows how to work with class HierarchyManager. 
               
               Further demos that present working with graph hierarchies include: 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li><a href="../../src/demo/view/hierarchy/GroupingDemo.java" title="Link to demo code" target="_top">GroupingDemo.java</a></li>
                  <li><a href="../../src/demo/view/hierarchy/GroupNavigationDemo.java" title="Link to demo code" target="_top">GroupNavigationDemo.java</a></li>
               </ul>
            </div>
            <p>
               
            </p>
         </div>
      </div>
      <table class="copyright" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td align="right">
                  <p class="copyright">Copyright &copy;2004-2015, yWorks GmbH. All rights reserved.</p>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="navfooter">
         <div class="navline2"></div>
         <div style="display:none"><img src="figures/navline2.jpg" alt=""><img src="figures/navbg2.jpg" alt=""></div>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="hier_uses.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="view_hierarchy.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="hier_realizers.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Working with Graph Hierarchies&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html" target="_top">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Node Realizers</td>
            </tr>
         </table>
      </div>
   </body>
</html>
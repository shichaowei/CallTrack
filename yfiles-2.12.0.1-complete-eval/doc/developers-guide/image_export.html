<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Exporting a Graph's Visual Representation</title>
      <link rel="stylesheet" href="ystyle.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
      <link rel="home" href="index.html" title="yFiles for Java Developer's Guide">
      <link rel="up" href="io.html" title="Chapter&nbsp;9.&nbsp;Input and Output">
      <link rel="previous" href="tgf.html" title="TGF">
      <link rel="next" href="extension_packages.html" title="yFiles Extension Packages">
      <link rel="stylesheet" href="jsdt/toc.css" type="text/css"><script type="text/javascript" src="jsdt/jquery.min.js"></script><script type="text/javascript" src="jsdt/toc.js"></script><link type="text/css" rel="stylesheet" href="jssh/SyntaxHighlighter.css"><script type="text/javascript" src="jssh/shCore.js"></script><script type="text/javascript" src="jssh/shBrushJava.js"></script><script type="text/javascript" src="jssh/shBrushXml.js"></script><script type="text/javascript">
  function sh() {

    dp.SyntaxHighlighter.HighlightAll('programlisting', false, false, false, null, false);
  }
  </script></head>
   <body onload="sh()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Exporting a Graph's Visual Representation</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="tgf.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;9.&nbsp;Input and Output</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="extension_packages.html">Next</a></td>
            </tr>
         </table>
         <div class="navline"></div>
         <div style="display:none"><img src="figures/navbg.jpg" alt=""><img src="figures/navline.jpg" alt=""></div>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="image_export"></a>Exporting a Graph's Visual Representation
                  </h2>
               </div>
            </div>
            <div></div>
         </div><a class="indexterm" name="d0e37911"></a><a class="indexterm" name="d0e37918"></a><a class="indexterm" name="d0e37921"></a><a class="indexterm" name="d0e37926"></a><a class="indexterm" name="d0e37931"></a><a class="indexterm" name="d0e37936"></a><a class="indexterm" name="d0e37943"></a><a class="indexterm" name="d0e37950"></a><p>
            By default, the yFiles library already offers various possibilities for writing 
            a graph (or more precisely, a graph's visual representation) to different 
            graphic file formats. 
            <a href="image_export.html#Image File Formats" title="Table&nbsp;9.21.&nbsp;Supported image file formats">Table&nbsp;9.21, &#8220;Supported image file formats&#8221;</a> lists the supported graph export file 
            formats. 
            
            
         </p>
         <p>
            Both exporting to stand-alone image files, as well as generating HTML-suited 
            versions, i.e., tiled images or image maps is possible. 
            Furthermore, tiled images can optionally be wrapped in HTML tables. 
            
            
         </p>
         <div class="table"><a name="Image File Formats"></a><p class="title"><b>Table&nbsp;9.21.&nbsp;Supported image file formats</b></p>
            <table summary="Supported image file formats" width="100%" border="1">
               <colgroup>
                  <col width="16%" align="center">
                  <col width="20%" align="left">
                  <col width="64%" align="left">
               </colgroup>
               <thead valign="top">
                  <tr>
                     <th align="center">File Name Extension</th>
                     <th align="left">Format Name</th>
                     <th align="left">Description</th>
                  </tr>
               </thead>
               <tbody valign="top">
                  <tr>
                     <td align="center">gif</td>
                     <td align="left"><a href="image_export.html#gif_jpg" title="Using GIF and JPG">Graphics Interchange Format</a></td>
                     <td align="left">
                            Bitmap graphics file format. 
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">jpg</td>
                     <td align="left"><a href="image_export.html#gif_jpg" title="Using GIF and JPG">Joint Photographic Experts Group</a></td>
                     <td align="left">
                            Bitmap graphics file format. 
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">png</td>
                     <td align="left"><a href="image_export.html#imageio" title="Using the Java Image I/O API">Portable Network Graphics</a></td>
                     <td align="left">
                            Bitmap graphics file format. 
                            Accessible via <a href="../api/y/io/ImageIoOutputHandler.html" title="Link to API documentation" target="_top">ImageIoOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
                            which uses the Java Image I/O API (available with J2SE 1.4 and higher). 
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">html</td>
                     <td align="left">HyperText Markup Language</td>
                     <td align="left">
                            Serves as a container for both tiled images and image maps. 
                          
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p>
            <a href="image_export.html#VFFs" title="Table&nbsp;9.22.&nbsp;Supported vector graphics file formats">Table&nbsp;9.22, &#8220;Supported vector graphics file formats&#8221;</a> lists further graph export file formats that are 
            provided by <a href="extension_packages.html" title="yFiles Extension Packages">yFiles extension packages</a>. 
            
         </p>
         <div class="table"><a name="VFFs"></a><p class="title"><b>Table&nbsp;9.22.&nbsp;Supported vector graphics file formats</b></p>
            <table summary="Supported vector graphics file formats" width="100%" border="1">
               <colgroup>
                  <col width="16%" align="center">
                  <col width="20%" align="left">
                  <col width="64%" align="left">
               </colgroup>
               <thead valign="top">
                  <tr>
                     <th align="center">File Name Extension</th>
                     <th align="left">Format Name</th>
                     <th align="left">Description</th>
                  </tr>
               </thead>
               <tbody valign="top">
                  <tr>
                     <td align="center">svg, svgz</td>
                     <td align="left"><a href="extension_packages.html#svg" title="ySVG">Scalable Vector Graphics</a></td>
                     <td align="left">
                            XML-based file format. 
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">pdf</td>
                     <td align="left"><a href="extension_packages.html#yexport" title="yExport">Portable Document Format</a></td>
                     <td align="left">
                          Desktop publishing file format for representing documents in a device 
                          independent and display resolution independent way.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">swf</td>
                     <td align="left"><a href="extension_packages.html#yexport" title="yExport">Shockwave Flash</a></td>
                     <td align="left">
                          Vector graphics file format for publishing multimedia contents on the Web.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">emf</td>
                     <td align="left"><a href="extension_packages.html#yexport" title="yExport">Enhanced Windows Metafile</a></td>
                     <td align="left">
                          Vector graphics file format on 
                          <span class="trademark">Microsoft</span>&reg;<span class="trademark">Windows</span>&reg; systems.
                          
                     </td>
                  </tr>
                  <tr>
                     <td align="center">eps</td>
                     <td align="left"><a href="extension_packages.html#yexport" title="yExport">Encapsulated PostScript</a></td>
                     <td align="left"><span class="trademark">PostScript</span>&reg; document with additional 
                          restrictions that describes an image or drawing.
                          
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p>
            The base class for all image export is abstract class 
            <a href="../api/y/io/ImageOutputHandler.html" title="Link to API documentation" target="_top">ImageOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
            
            It has methods from its direct superclass IOHandler that are related to file 
            input disabled (they return either <tt class="code">false</tt> or throw "Unsupported 
            Operation" exception). 
            
         </p>
         <p>
            
            File output, i.e., the actual process of exporting a Graph2D to an image is 
            implemented as two steps: 
            
         </p>
         <div class="orderedlist">
            <ol type="1">
               <li>
                  The graph is rendered to an image by its current view, i.e., an instance of 
                  type <a href="../api/y/view/Graph2DView.html" title="Link to API documentation" target="_top">Graph2DView<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
                  
               </li>
               <li>
                  
                  The resulting image is encoded and written to an output stream either by 
                  directly using one of the classes for image export, such as 
                  <a href="../api/y/io/GIFIOHandler.html" title="Link to API documentation" target="_top">GIFIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> or 
                  <a href="../api/y/io/JPGIOHandler.html" title="Link to API documentation" target="_top">JPGIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>, or by using the services of 
                  class <a href="../api/y/io/ImageIoOutputHandler.html" title="Link to API documentation" target="_top">ImageIoOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
                  
               </li>
            </ol>
         </div>
         <p>
            
            
            
         </p><a class="indexterm" name="d0e38105"></a><p><a name="rendering_hints_exporting"></a>
            When rendering the graph to an image, the GraphicsContext instance that is 
            <a href="mvc_view.html#rendering_hints" title="Rendering Hints">set as a rendering hint</a> with the 
            <tt class="classname">java.awt.Graphics2D</tt> object reflects the current 
            rendering context accordingly, i.e., invoking the instance's 
            <a href="../api/y/view/GraphicsContext.html#isExportPainting()" title="Link to API documentation" target="_top">isExportPainting()<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> method 
            will yield <tt class="code">true</tt>.
            
         </p>
         <p>
            Also, rendering hints that control aspects of the rendering process of the view,
            like, e.g., whether the state labels of group nodes should be painted, will be honored, 
            too.
            
         </p>
         <p>
            
            
            The following methods represent the two steps.
            They are defined abstract, so descendants of class ImageOutputHandler have to implement
            them appropriately:
            
         </p>
         <div class="techn_templ">
            <center>
               <table width="100%" border="1">
                  <colgroup>
                     <col width="16%" align="left">
                     <col width="84%" align="left">
                  </colgroup>
                  <tbody valign="top">
                     <tr class="techn_api">
                        <td colspan="2" align="left"><pre class="programlisting ignore"><a href="../api/y/io/ImageOutputHandler.html#createImage(int, int)" title="Link to API documentation" target="_top">protected abstract BufferedImage createImage(int width, int height)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
<a href="../api/y/io/ImageOutputHandler.html#encode(java.awt.image.BufferedImage, java.io.OutputStream)" title="Link to API documentation" target="_top">protected abstract void encode(BufferedImage image, OutputStream out)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>
</pre></td>
                     </tr>
                     <tr class="spacing">
                        <td align="left">Description</td>
                        <td align="left">Abstract methods from class ImageOutputHandler.</td>
                     </tr>
                  </tbody>
               </table>
            </center>
         </div>
         <p>
            
            For situations where no proper Graph2DView is associated with a Graph2D object, 
            class ImageOutputHandler offers the possibility to create a default Graph2DView 
            object. 
            Subsequently, this view can be registered with the graph as the current view, 
            and be used to render the image. 
            
            Note that this process is also triggered whenever an ImageOutputHandler 
            encounters a graph that lacks a current view. 
            
         </p>
         <p>
            As a further option, ImageOutputHandler also provides for anti-aliasing with 
            image export. 
            
            
         </p>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="image_export_preparation"></a>Preparing the Graph
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Before a graph's visual representation can be exported to an image file, it has 
               to be properly prepared. 
               Preparation of a <a href="../api/y/view/Graph2D.html" title="Link to API documentation" target="_top">Graph2D<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> means setting up 
               the current view, more precisely, the instance of type 
               <a href="../api/y/view/Graph2DView.html" title="Link to API documentation" target="_top">Graph2DView<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> that contains the graph. 
               
            </p>
            <p>
               
               This Graph2DView object determines the width and height of the image, the 
               graph's clipping that is to be exported, and also its zoom level. 
               Further settings influence the level of detail that is to be shown on the 
               resulting image, i.e., if, among other things, there should be labels or not. 
               
               Moreover, anything that is displayed in this view, for example a background 
               image, can be exported to the file, too. 
               
            </p>
            <p>
               
               
               Setting up a view can be done in several ways, either 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     directly as shown in <a href="image_export.html#setup_view_directly" title="Example&nbsp;9.26.&nbsp;Directly setting up a view for image export">Example&nbsp;9.26, &#8220;Directly setting up a view for image export&#8221;</a> (similar code can be 
                     seen in tutorial demo application 
                     <a href="../../src/demo/io/GraphFormatConverter.java" title="Link to demo code" target="_top">GraphFormatConverter.java</a>), or 
                     
                  </li>
                  <li>
                     using the services of class 
                     <a href="../api/y/io/ViewPortConfigurator.html" title="Link to API documentation" target="_top">ViewPortConfigurator<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
                     
                  </li>
               </ul>
            </div>
            <p>
               
               
               
            </p>
            <div class="example"><a name="setup_view_directly"></a><p class="title"><b>Example&nbsp;9.26.&nbsp;Directly setting up a view for image export</b></p><pre class="programlisting java">
void configureView(Graph2DView view)
{
  Graph2D graph = view.getGraph2D();
  Rectangle box = graph.getBoundingBox();
  Dimension dim = box.getSize();
  
  // Set the view's width and height, in turn this also sets the image's size. 
  view.setSize(dim);
  // The clipping should show the entire graph. (The graph's bounding is a 
  // little enlarged.) 
  view.zoomToArea(box.getX() - 10, box.getY() - 10, 
                  box.getWidth() + 20, box.getHeight() + 20);
  
  // Set the detail threshold so that it is never switched to less detail mode. 
  view.setPaintDetailThreshold(0.0);
}
</pre></div>
            <p>
               Class ViewPortConfigurator is a convenience that can be used to set up a view. 
               It supports common scenarios for image export, for example, exporting the 
               entire graph or only that part of a graph that can be seen in its current view. 
               In addition, it offers functionality for adjusting the size of an image, for 
               example, it allows to automatically adjust the height of an image given the 
               desired width and the graph's scaling factor. 
               
               The results when using ViewPortConfigurator for the two main setup scenarios 
               for image export are depicted in <a href="image_export.html#ex_clippings" title="Figure&nbsp;9.6.&nbsp;Clipping scenarios with class ViewPortConfigurator">Figure&nbsp;9.6, &#8220;Clipping scenarios with class ViewPortConfigurator&#8221;</a>. 
               
            </p>
            <div class="figure"><a name="ex_clippings"></a><p class="title"><b>Figure&nbsp;9.6.&nbsp;Clipping scenarios with class ViewPortConfigurator</b></p>
               <div class="informaltable">
                  <center>
                     <table border="0">
                        <colgroup>
                           <col width="100%">
                        </colgroup>
                        <tbody>
                           <tr>
                              <td>
                                 <div class="mediaobject" align="center"><img src="figures/vpc_yed_4.gif" align="middle" alt="Clipping scenarios with class ViewPortConfigurator"></div>
                              </td>
                           </tr>
                           <tr align="center">
                              <td align="center">
                                 Application window showing the original view together with its graph. 
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
               <div class="informaltable">
                  <center>
                     <table border="0">
                        <colgroup>
                           <col width="52%">
                           <col width="48%">
                        </colgroup>
                        <tbody>
                           <tr>
                              <td>
                                 <div class="mediaobject" align="center"><img src="figures/vpc_ex_view_4.gif" align="middle" alt="Clipping scenarios with class ViewPortConfigurator"></div>
                              </td>
                              <td>
                                 <div class="mediaobject" align="center"><img src="figures/vpc_ex_graph_4.gif" align="middle" alt="Clipping scenarios with class ViewPortConfigurator"></div>
                              </td>
                           </tr>
                           <tr align="center" valign="top">
                              <td align="center" valign="top">
                                 Resulting image when only the visible part from the Graph2DView containing the 
                                 graph is being exported using 
                                 <a href="../api/y/io/ViewPortConfigurator.html#CLIP_VIEW" title="Link to API documentation" target="_top">CLIP_VIEW<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
                                 
                              </td>
                              <td align="center" valign="top">
                                 Resulting image when the complete graph is being exported using 
                                 <a href="../api/y/io/ViewPortConfigurator.html#CLIP_GRAPH" title="Link to API documentation" target="_top">CLIP_GRAPH<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
                                 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </center>
               </div>
            </div>
            <p>
               <a href="image_export.html#setup_view" title="Example&nbsp;9.27.&nbsp;Using class ViewPortConfigurator to set up a view for image export">Example&nbsp;9.27, &#8220;Using class ViewPortConfigurator to set up a view for image export&#8221;</a> shows how to configure a view using class 
               ViewPortConfigurator. 
               Except for image size and graph clipping all configurator settings are left to 
               their respective default values, i.e., a zoom level of 100%, and an additional 
               margin of 15 pixels around the bounding box of the graph is used to set up the 
               view. 
               
            </p>
            <div class="example"><a name="setup_view"></a><p class="title"><b>Example&nbsp;9.27.&nbsp;Using class ViewPortConfigurator to set up a view for image export</b></p><pre class="programlisting java">
void configureExportView(Graph2DView exportView)
{
  ViewPortConfigurator vpc = new ViewPortConfigurator();
  
  // Register the graph to be exported with the configurator instance. 
  // Depending on the other settings (see below) the graph will be used to 
  // determine the image size, for example. 
  vpc.setGraph2D(exportView.getGraph2D());
  
  // The complete graph should be exported, hence set the clipping type 
  // accordingly. 
  vpc.setClipType(ViewPortConfigurator.CLIP_GRAPH);
  // The graph's bounding box should determine the size of the image. 
  vpc.setSizeType(ViewPortConfigurator.SIZE_USE_ORIGINAL);
  
  // Configure the export view using mainly default values, i.e., zoom level 
  // 100%, and 15 pixel margin around the graph's bounding box. 
  vpc.configure(exportView);
}
</pre></div>
            <p>
               
               A convenient technique to prepare a Graph2D instance for image export whenever 
               its current view cannot be modified, because 
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     the user experience would change unacceptably (e.g., the desired clipping and 
                     zoom level for the image differ from the settings of the view), or 
                     
                  </li>
                  <li>
                     there simply is no current view (e.g., when processing graph files), 
                     
                  </li>
               </ul>
            </div>
            <p>
               is to temporarily replace the currently active Graph2DView instance with a 
               newly created one. 
               This dedicated "export" view is then configured and used to write out the 
               image, and afterwards the original Graph2DView instance is restored. 
               
               The methods in <a href="image_export.html#dedicated_view" title="Example&nbsp;9.28.&nbsp;Using a dedicated &#34;export&#34; view">Example&nbsp;9.28, &#8220;Using a dedicated "export" view&#8221;</a> demonstrate how to do the 
               replacing and restoring. 
               
            </p>
            <div class="example"><a name="dedicated_view"></a><p class="title"><b>Example&nbsp;9.28.&nbsp;Using a dedicated "export" view</b></p><pre class="programlisting java">
Graph2DView replaceCurrentWithExportView(Graph2D graph, ImageOutputHandler ioh)
{
  // Save the currently active view. 
  Graph2DView originalView = (Graph2DView)graph.getCurrentView();
  
  // Create a new Graph2DView instance with the graph. This will be the 
  // dedicated view for image export. 
  Graph2DView exportView = ioh.createDefaultGraph2DView(graph);

  // Use the Graph2DRenderer instance of the currently active view. (Optional.) 
  exportView.setGraph2DRenderer(originalView.getGraph2DRenderer());
  // Use the rendering hints of the currently active view. (Optional.)
  exportView.setRenderingHints(originalView.getRenderingHints());
  
  // Replace the currently active view containing the graph with the "export" 
  // view. 
  graph.setCurrentView(exportView);
  
  return originalView;
}

void restoreOriginalView(Graph2D graph, Graph2DView originalView)
{
  // Remove the "export" view from the graph. 
  graph.removeView(graph.getCurrentView());
  // Reset the current view to the originally active view. 
  graph.setCurrentView(originalView);
}
</pre></div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>
                  Using method replaceCurrentWithExportView(Graph2D, ImageOutputHandler) from 
                  <a href="image_export.html#dedicated_view" title="Example&nbsp;9.28.&nbsp;Using a dedicated &#34;export&#34; view">Example&nbsp;9.28, &#8220;Using a dedicated "export" view&#8221;</a> with an ImageOutputHandler of type 
                  <a href="../api/y/io/GIFIOHandler.html" title="Link to API documentation" target="_top">GIFIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> will result in a transparent 
                  background for the generated images. 
                  
                  This is the default behavior of method 
                  <a href="../api/y/io/GIFIOHandler.html#createDefaultGraph2DView(y.view.Graph2D)" title="Link to API documentation" target="_top">createDefaultGraph2DView(Graph2D)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
                  from class GIFIOHandler. 
                  
                  
                  
               </p>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>
                  Setting a <a href="../api/y/view/Graph2DRenderer.html" title="Link to API documentation" target="_top">Graph2DRenderer<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> on the export 
                  view is only necessary when the Graph2DRenderer used with the original view is 
                  a specialized class that provides custom behavior. 
                  
               </p>
            </div>
         </div><a class="indexterm" name="d0e38269"></a><a class="indexterm" name="d0e38274"></a><a class="indexterm" name="d0e38279"></a><a class="indexterm" name="d0e38286"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="gif_jpg"></a>Using GIF and JPG
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               
               
               In the second step of exporting a Graph2D to an image file, the actual encoding 
               is done. 
               Classes <a href="../api/y/io/GIFIOHandler.html" title="Link to API documentation" target="_top">GIFIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> and 
               <a href="../api/y/io/JPGIOHandler.html" title="Link to API documentation" target="_top">JPGIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> are responsible for encoding 
               the already rendered image to GIF and JPG file format, respectively. 
               
            </p>
            <p>
               As a single possibility of control, class JPGIOHandler offers a setter method 
               to define the encoding quality. 
               
               
               The other thing to observe with class GIFIOHandler is its 
               <a href="../api/y/io/GIFIOHandler.html#createDefaultGraph2DView(y.view.Graph2D)" title="Link to API documentation" target="_top">createDefaultGraph2DView(Graph2D)<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> 
               method. 
               By default, this method sets a transparent background to be used for image 
               generation; 
               <a href="image_export.html#ex_background" title="Example&nbsp;9.29.&nbsp;Resetting the default background renderer for a Graph2DView instance">Example&nbsp;9.29, &#8220;Resetting the default background renderer for a Graph2DView instance&#8221;</a> shows how to circumvent this behavior easily. 
               
               (One occasion for resetting the background renderer would be right after the 
               call to the aforementioned method.) 
               
               
            </p>
            <div class="example"><a name="ex_background"></a><p class="title"><b>Example&nbsp;9.29.&nbsp;Resetting the default background renderer for a Graph2DView instance</b></p><pre class="programlisting java">
// 'exportView' is of type y.view.Graph2DView. 

exportView.setBackgroundRenderer(new DefaultBackgroundRenderer(exportView));
</pre></div>
            <p>
               The code fragment in <a href="image_export.html#ex_export" title="Example&nbsp;9.30.&nbsp;Creating an ImageOutputHandler">Example&nbsp;9.30, &#8220;Creating an ImageOutputHandler&#8221;</a> shows how to instantiate the 
               actual descendants of ImageOutputHandler for exporting a Graph2D to an image. 
               
               And <a href="image_export.html#ex_image_ex" title="Example&nbsp;9.31.&nbsp;Exporting a Graph2D object as an image">Example&nbsp;9.31, &#8220;Exporting a Graph2D object as an image&#8221;</a> summarizes all necessary steps for image 
               export in their natural order. 
               
               
               
            </p>
            <div class="example"><a name="ex_export"></a><p class="title"><b>Example&nbsp;9.30.&nbsp;Creating an ImageOutputHandler</b></p><pre class="programlisting java">
// 'ioh' is of type y.io.ImageOutputHandler. 

// Create the proper ImageOutputHandler for image generation. 
if (exportAsGIF) {
  // Either GIF... 
  ioh = new GIFIOHandler();
}
else {
  // ... or JPG file format. 
  ioh = new JPGIOHandler();
  // Set the image quality to 90%. This yields a good compromise between small 
  // file size and high quality. 
  ((JPGIOHandler)ioh).setQuality(0.9f);
}

// Write the generated image to a file. 
String ext = ioh.getFileNameExtension();
// Mind the dot! It is not part of the actual file name extension...
exportGraphToImageFileFormat(graph, ioh, "My" + ext.toUpperCase() + "." + ext);
</pre></div>
            <div class="example"><a name="ex_image_ex"></a><p class="title"><b>Example&nbsp;9.31.&nbsp;Exporting a Graph2D object as an image</b></p><pre class="programlisting java">
void exportGraphToImageFileFormat(Graph2D graph, ImageOutputHandler ioh, 
                                  String outFile)
{
  Graph2DView originalView = replaceCurrentWithExportView(graph, ioh);
  configureExportView((Graph2DView)graph.getCurrentView());
  
  writeGraphToFile(graph, ioh, outFile);
  restoreOriginalView(graph, originalView);
}
</pre></div>
         </div><a class="indexterm" name="d0e38330"></a><a class="indexterm" name="d0e38335"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="imageio"></a>Using the Java Image I/O API
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Class <a href="../api/y/io/ImageIoOutputHandler.html" title="Link to API documentation" target="_top">ImageIoOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> can be used in 
               the second step of exporting a Graph2D to an image file. 
               It serves as an adapter to so-called image writers that are registered with the 
               Java Image I/O API. 
               
               Out of the box, J2SE 1.4 supports PNG (Portable Network Graphics) as an 
               additional image file format. 
               J2SE 5.0 adds BMP file format, a bitmap graphics file format popular on the 
               Microsoft Windows platform. 
               
            </p>
            <p>
               The central class of Java Image I/O API is 
               <tt class="classname">javax.imageio.ImageIO</tt>. 
               It offers several static methods that allow to query and to retrieve available 
               image writers. 
               
               <a href="image_export.html#ex_imageio" title="Example&nbsp;9.32.&nbsp;Creating a PNG image output handler">Example&nbsp;9.32, &#8220;Creating a PNG image output handler&#8221;</a> demonstrates the use of ImageIO to create an 
               ImageOutputHandler object that provides for PNG image exporting. 
               
            </p>
            <div class="example"><a name="ex_imageio"></a><p class="title"><b>Example&nbsp;9.32.&nbsp;Creating a PNG image output handler</b></p><pre class="programlisting java">
ImageOutputHandler createPNGOutputHandler()
{
  // Use the services of Java Image I/O API to see whether there is an image 
  // writer registered that is capable of writing the PNG graphics file format. 
  Iterator it = ImageIO.getImageWritersBySuffix("png");
  ImageWriter iw = (ImageWriter)(it.hasNext() ? it.next() : null);
  
  // Return an image output handler that serves as an adapter to this image 
  // writer. 
  return ((iw == null) ? null : new ImageIoOutputHandler(iw));
}
</pre></div>
            <p>
               
            </p>
         </div><a class="indexterm" name="d0e38363"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="tiling"></a>Image Tiling
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Producing images from graphs is a memory intensive task, especially when the 
               given graph extends a lot in both horizontal and vertical direction. 
               
               Image tiling, i.e., producing a number of small images instead of a single big 
               one, helps in decreasing the memory footprint substantially. 
               
               
               Also, compared to a single big image many small ones are much better suited for 
               deployment on web pages, because web browsers can cache them more efficiently. 
               
            </p>
            <p>
               Class <a href="../api/y/io/TiledImageOutputHandler.html" title="Link to API documentation" target="_top">TiledImageOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> can be used 
               as a thin wrapper around any of the classes for image export, e.g., 
               <a href="../api/y/io/GIFIOHandler.html" title="Link to API documentation" target="_top">GIFIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>, or 
               <a href="../api/y/io/JPGIOHandler.html" title="Link to API documentation" target="_top">JPGIOHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
               
               The respective class is then used as a delegate that is invoked from within the 
               tiling process. 
               
               To control the tiling, class TiledImageOutputHandler provides methods to set 
               the number of rows and columns, or, alternatively, to set the maximal size of a 
               tile. 
               In the latter case, the number of rows and columns is determined automatically. 
               
               As a further option an additional HTML table that holds the tiles can be 
               generated. 
               
               
            </p>
            <p>
               <a href="image_export.html#ex_tiling" title="Example&nbsp;9.33.&nbsp;Using class TiledImageOutputHandler">Example&nbsp;9.33, &#8220;Using class TiledImageOutputHandler&#8221;</a> demonstrates how image tiling can be done with only 
               a few lines of additional code. 
               
            </p>
            <div class="example"><a name="ex_tiling"></a><p class="title"><b>Example&nbsp;9.33.&nbsp;Using class TiledImageOutputHandler</b></p><pre class="programlisting java">
IOHandler getTilingWrapper(ImageOutputHandler ioh, int row, int column, 
                           boolean htmlTable)
{
  // Check for valid parameter values. 
  if (row &lt; 1 || column &lt; 1)
    return ioh;

  TiledImageOutputHandler tioh = new TiledImageOutputHandler(ioh);
  // Set the tiling accordingly. 
  tioh.setRowCount(row);
  tioh.setColumnCount(column);

  // Set HTML table generation accordingly. 
  tioh.setHTMLTableGenerationActive(htmlTable);

  return tioh;
}
</pre></div>
         </div><a class="indexterm" name="d0e38390"></a><div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="image_maps"></a>Image Maps
                     </h3>
                  </div>
               </div>
               <div></div>
            </div>
            <p>
               Class <a href="../api/y/io/ImageMapOutputHandler.html" title="Link to API documentation" target="_top">ImageMapOutputHandler<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> can be used to 
               generate corresponding HTML image maps for images exported from graphs. 
               
               For every rectangular shaped graph element, i.e., nodes, node labels, and edge 
               labels, it can generate an HTML &lt;area&gt; element with the dimensions of the 
               respective element used as active area. 
               It can also generate an HTML &lt;area&gt; element for arbitrarily shaped edge 
               paths. 
               There, the active area is determined by the path together with a distance 
               around it. 
               
               All such generated &lt;area&gt; elements will be encapsulated in one HTML &lt;map&gt; 
               element. 
               
            </p>
            <p>
               To have an HTML &lt;area&gt; element created, the respective graph element has to 
               be associated with a link information record of type 
               <a href="../api/y/io/LinkInfo.html" title="Link to API documentation" target="_top">LinkInfo<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a>. 
               Most importantly, this record contains the URL the link should point to. 
               Association of graph element and link information record is done with the help 
               of a <a href="../api/y/io/LinkMap.html" title="Link to API documentation" target="_top">LinkMap<sup xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format"><img src="figures/icon_api.gif" align="bottom" border="0"></img></sup></a> object which is given to class 
               ImageMapOutputHandler. 
               
            </p>
            <p>
               <a href="image_export.html#image_map" title="Example&nbsp;9.34.&nbsp;Creating a simple image map">Example&nbsp;9.34, &#8220;Creating a simple image map&#8221;</a> shows a code fragment that associates all nodes of 
               a graph to link to one URL. 
               
            </p>
            <div class="example"><a name="image_map"></a><p class="title"><b>Example&nbsp;9.34.&nbsp;Creating a simple image map</b></p><pre class="programlisting java">
// Create the link map that will hold the link information records for graph 
// elements. 
LinkMap lm = new LinkMap();
lm.setMapName("yWorks");

// Create one link information record for every node of the graph. 
LinkInfo li = new LinkInfo();

// The actual URL that should be used for the link. 
li.setAttribute(LinkInfo.HTML_REFERENCE, "http://www.yworks.com/");
// An alternate text for the link. 
li.setAttribute(LinkInfo.HTML_ALT, "Visit yWorks");
// A tool tip text (for some UAs). 
li.setAttribute(LinkInfo.HTML_TITLE, "Visit yWorks");

// Associate the link information record with every node from the graph. 
for (NodeCursor nc = graph.nodes(); nc.ok(); nc.next())
  lm.put(nc.node(), li);

ImageMapOutputHandler imoh = new ImageMapOutputHandler();
// Hand the link map with all its link information records over to the image 
// map generator. 
imoh.setReferences(lm);

// Get the generated HTML &lt;map&gt; element. 
String mapElement = imoh.createHTMLString();
</pre></div>
            <p>
               For further examples see also <a href="../../src/demo/io/ImageMapDemo.java" title="Link to demo code" target="_top">ImageMapDemo.java</a> 
               from the tutorial demo applications. 
               
            </p>
         </div>
      </div>
      <table class="copyright" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td align="right">
                  <p class="copyright">Copyright &copy;2004-2015, yWorks GmbH. All rights reserved.</p>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="navfooter">
         <div class="navline2"></div>
         <div style="display:none"><img src="figures/navline2.jpg" alt=""><img src="figures/navbg2.jpg" alt=""></div>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="tgf.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="io.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="extension_packages.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">TGF&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html" target="_top">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;yFiles Extension Packages</td>
            </tr>
         </table>
      </div>
   </body>
</html>